<!DOCTYPE html>
<html lang="en">
<!-- 
  path: src/presentation/video-lab.html
  description: Temporal Fusion Module v21.10 - DOM Integrity & Telemetry Fix.
  
  ABSTRACT:
  This module provides a specialized workspace for transforming static 
  photorealistic manifolds into fluid cinematic sequences. This version ensures 
  the dynamic video content does not interfere with the static telemetry 
  overlays (progress bar, viewport label).
  
  ARCHITECTURAL ROLE (Presentation Layer):
  Acts as the primary interface for Temporal Neural Synthesis. It manages 
  high-latency video tasks and handles the robust rendering of MP4 containers 
  directly within a DOM-stable neural monitor.

  author: Enrique GonzÃ¡lez GutiÃ©rrez <enrique.gonzalez.gutierrez@gmail.com>
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Z-REALISM | Temporal Fusion Lab</title>

    <!-- FAVICON CONFIGURATION -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- Design System & Laboratory Orchestration -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/lab.css">

    <!-- Temporal Module Aesthetic Override (Emerald Identity) -->
    <style>
        :root {
            --accent: var(--accent-video); /* Global override for Temporal Lab */
        }
        .btn-primary {
            background: var(--accent-video);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        .btn-primary:hover {
            box-shadow: 0 6px 25px rgba(16, 185, 129, 0.5);
        }
        .progress-fill {
            background: var(--accent-video);
            box-shadow: 0 0 15px var(--accent-video);
        }
        .modern-input:focus, .modern-textarea:focus {
            border-color: var(--accent-video);
        }
    </style>
</head>
<body>
    <!-- Persistent Cyber-Grid Ambience -->
    <div class="grid-overlay"></div>

    <!-- 
      DYNAMIC NAVIGATION INJECTION: 
      The <nav> is automatically injected by js/nav.js.
    -->

    <!-- Main Laboratory Workspace -->
    <div class="lab-layout">
        
        <!-- LEFT COLUMN: Temporal Control Panel (Sidebar) -->
        <aside class="control-panel">
            
            <!-- 1. IDENTITY ANCHOR -->
            <div class="control-group">
                <label for="char-name">SUBJECT DNA NAME</label>
                <input type="text" id="char-name" class="modern-input" placeholder="Enter subject name...">
            </div>
            
            <!-- 2. DATA INGESTION (LOAD GENERATED STILL) -->
            <div class="upload-zone" id="drop-zone">
                <input type="file" id="file-upload" hidden accept="image/*">
                <div id="file-label">
                    <span class="upload-icon">ðŸŽ¬</span>
                    <span class="upload-text">LOAD GENERATED STILL</span>
                </div>
            </div>

            <!-- 3. MOTION GUIDANCE (TEMPORAL PROMPT) -->
            <div class="control-group">
                <label for="motion-prompt">MOTION GUIDANCE</label>
                <textarea id="motion-prompt" class="modern-textarea" placeholder="Describe cinematic movement (e.g., hair flowing, subtle breathing, eye blinking...)"></textarea>
            </div>

            <!-- 4. TEMPORAL HYPERPARAMETERS -->
            <div class="control-group">
                <label>DURATION (FRAMES) <span id="val-duration">24</span></label>
                <input type="range" id="input-duration" min="16" max="48" step="8" value="24">
            </div>

            <div class="control-group">
                <label>MOTION INTENSITY <span id="val-bucket">127</span></label>
                <input type="range" id="input-bucket" min="1" max="255" step="1" value="127">
            </div>

            <div class="control-group">
                <label>FPS (PLAYBACK RATE) <span id="val-fps">8</span></label>
                <input type="range" id="input-fps" min="8" max="24" step="2" value="8">
            </div>

            <!-- 5. EXECUTION TRIGGER -->
            <button id="btn-animate" class="btn btn-primary" style="margin-top: 10px;">
                INITIATE TEMPORAL FUSION
            </button>
            
            <!-- 6. HARDWARE RESOURCE TELEMETRY NOTE -->
            <div style="background: rgba(16, 185, 129, 0.05); padding: 18px; border-radius: 8px; border-left: 3px solid var(--accent-video); margin-top: 10px;">
                <p style="font-size: 0.65rem; color: var(--text-muted); line-height: 1.5; font-family: var(--font-ui);">
                    <strong style="color: var(--accent-video);">HARDWARE ORCHESTRATION:</strong><br>
                    Temporal generation utilizes sequential weight offloading. 
                    Estimated processing: ~15s per frame on target hardware (GTX 1060).
                </p>
            </div>
        </aside>

        <!-- RIGHT COLUMN: Neural Viewports (Workspace) -->
        <main class="viewport-area">
            
            <!-- SOURCE INPUT VIEWPORT (The Manifold Still) -->
            <div class="viewport-card" id="source-preview">
                <span class="viewport-label">STILL_INPUT_MANIFOLD</span>
                <div style="color: rgba(255,255,255,0.02); font-family: var(--font-code); font-size: 2.5rem; font-weight: 800; letter-spacing: 10px;">
                    NO_DATA
                </div>
            </div>

            <!-- TEMPORAL OUTPUT VIEWPORT (The Neural Video) -->
            <div class="viewport-card" id="result-display">
                <span class="viewport-label">TEMPORAL_OUTPUT_MONITOR</span>

                <div id="telemetry-hud" class="telemetry-hud hidden" style="border-left-color: var(--accent-video);">
                    <div class="hud-row">
                        <div class="status-indicator status-ok"></div>
                        <span class="hud-label">TOTAL_FRAMES</span>
                        <span id="hud-frames" class="hud-value">0</span>
                    </div>
                    <div class="hud-row">
                        <div class="status-indicator status-ok"></div>
                        <span class="hud-label">TARGET_FPS</span>
                        <span id="hud-fps" class="hud-value">0</span>
                    </div>
                    <div class="hud-separator"></div>
                    <div class="hud-row">
                        <span class="hud-label">INF_TIME</span>
                        <span id="hud-time" class="hud-value-alt" style="color: var(--accent-video);">0.0s</span>
                    </div>
                </div>
                
                <!-- NEW: This div will hold all dynamic video content -->
                <div id="dynamic-content-viewport" style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; z-index:1;">
                    
                    <!-- PLACEHOLDER IMAGE -->
                    <img src="assets/video_preview.png" alt="Video Preview" class="video-preview" style="max-width:80%; border-radius:8px; opacity:0.3;">
                    
                    <div style="color: rgba(255,255,255,0.02); font-family: var(--font-code); font-size: 2.5rem; font-weight: 800; letter-spacing: 10px;">
                        WAITING
                    </div>
                </div>

                <!-- The progress overlay is now a sibling and is ALWAYS in the DOM -->
                <div id="progress-overlay" class="progress-overlay hidden" style="z-index:20;">
                    <div class="status-message" id="status-text">INITIALIZING TEMPORAL ENGINE...</div>
                    <div class="progress-container">
                        <div class="progress-fill" id="progress-bar"></div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- 
      SHARED ARCHITECTURAL COMPONENTS 
    -->
    <script src="js/nav.js"></script>
    <script src="js/footer.js"></script>
    <script src="js/cookie-consent.js"></script>

    <!-- 
      APPLICATION LOGIC 
    -->
    <script src="js/api.js"></script>
    <script src="js/lab-video.js"></script>
</body>
</html>